1
00:00:03,516 --> 00:00:06,500
[音樂]

2
00:00:08,516 --> 00:00:15,556
[掌聲]

3
00:00:16,056 --> 00:00:16,916
>> 下午好 歡迎各位

4
00:00:16,916 --> 00:00:18,456
參加今天的“訂閱優惠的最佳實踐”會議

5
00:00:19,176 --> 00:00:20,046
我是 Ross LaBeau

6
00:00:20,046 --> 00:00:21,396
我是 App Store 團隊的一名工程師

7
00:00:22,206 --> 00:00:23,086
今天我們將深入地瞭解

8
00:00:23,086 --> 00:00:24,646
App Store 中

9
00:00:24,646 --> 00:00:25,946
App 內購買項目的最新特性

10
00:00:28,496 --> 00:00:30,556
訂閱提供者

11
00:00:30,556 --> 00:00:31,726
可通過訂閱優惠

12
00:00:31,726 --> 00:00:33,016
這一全新的方式

13
00:00:33,016 --> 00:00:34,476
為用戶提供

14
00:00:34,476 --> 00:00:36,386
特定時長的折扣價格

15
00:00:37,836 --> 00:00:39,996
我們知道

16
00:00:40,266 --> 00:00:43,076
用戶流失是訂閱 App

17
00:00:43,236 --> 00:00:44,016
利潤下降的主要原因之一

18
00:00:44,946 --> 00:00:46,516
這是一個強大的新工具

19
00:00:46,516 --> 00:00:48,646
通過留住用戶

20
00:00:49,046 --> 00:00:51,316
或贏回已經流失的用戶

21
00:00:51,316 --> 00:00:52,856
來幫助減少用戶流失

22
00:00:53,526 --> 00:00:56,336
訂閱優惠

23
00:00:56,336 --> 00:00:57,486
最酷的地方在於

24
00:00:57,486 --> 00:00:58,826
你可以選擇何時

25
00:00:58,826 --> 00:01:00,216
向用戶提供優惠

26
00:01:00,216 --> 00:01:01,246
以及向他們展示哪些優惠

27
00:01:02,176 --> 00:01:05,576
例如 如果你剛剛收到一條

28
00:01:06,056 --> 00:01:07,656
服務器對服務器的自動續訂通知

29
00:01:07,656 --> 00:01:12,026
一位用戶已經取消了自動續訂

30
00:01:12,026 --> 00:01:15,166
你想在即刻採取行動

31
00:01:15,166 --> 00:01:17,226
並給予他優惠

32
00:01:17,226 --> 00:01:18,896
例如為期三個月的半價訂閱

33
00:01:18,896 --> 00:01:20,436
從而讓用戶繼續使用你的 App 並保持訂閱

34
00:01:23,356 --> 00:01:24,726
與試用優惠不同的是

35
00:01:25,006 --> 00:01:26,476
用戶可以在你的允許下

36
00:01:26,476 --> 00:01:27,496
多次兌換訂閱優惠

37
00:01:27,496 --> 00:01:29,276
他們甚至可以

38
00:01:29,276 --> 00:01:30,226
多次兌換同一優惠

39
00:01:30,716 --> 00:01:35,226
App Store 提出的唯一條件是

40
00:01:35,226 --> 00:01:36,756
用戶必須

41
00:01:36,756 --> 00:01:38,076
正在自動續訂

42
00:01:38,106 --> 00:01:39,706
或者訂閱過你的 App

43
00:01:43,666 --> 00:01:45,426
今天我們將介紹

44
00:01:45,426 --> 00:01:46,606
在 App Store Connect 中

45
00:01:46,606 --> 00:01:47,276
創建這些優惠的具體設置

46
00:01:49,416 --> 00:01:50,466
我們將討論如何生成

47
00:01:50,466 --> 00:01:51,906
在每次交易中

48
00:01:51,906 --> 00:01:53,636
你都需要發送的密碼簽名

49
00:01:55,056 --> 00:01:56,456
我們也將談到新的 StoreKit API

50
00:01:56,456 --> 00:01:58,136
以及如何使用它們

51
00:01:58,176 --> 00:02:00,236
向 App Store 發送一個交易

52
00:02:00,236 --> 00:02:01,500
並進行一次購買

53
00:02:04,556 --> 00:02:06,016
我們將從 App Store 的角度

54
00:02:06,016 --> 00:02:07,216
以及如何創建你的

55
00:02:07,216 --> 00:02:08,696
自定義業務規則的角度

56
00:02:08,696 --> 00:02:10,586
來討論用戶的資格審查

57
00:02:11,735 --> 00:02:14,066
我們將提供一些提示和技巧

58
00:02:14,066 --> 00:02:15,386
幫助你給你的用戶

59
00:02:15,386 --> 00:02:16,656
分配和營銷這些優惠

60
00:02:17,196 --> 00:02:20,346
最後 我們將討論

61
00:02:20,346 --> 00:02:21,836
更多關於如何

62
00:02:21,836 --> 00:02:22,536
減少用戶流失的商業策略

63
00:02:27,056 --> 00:02:28,456
首先 就像試用優惠一樣

64
00:02:28,456 --> 00:02:29,866
你需要在 App Store Connect 中

65
00:02:29,866 --> 00:02:30,946
設置訂閱優惠

66
00:02:31,816 --> 00:02:34,416
進入“功能”選項卡下的

67
00:02:34,416 --> 00:02:36,046
“App 內購買”

68
00:02:36,466 --> 00:02:38,436
之後選擇任一自動續訂的訂閱選項

69
00:02:39,986 --> 00:02:41,066
然後點按“訂閱價格”

70
00:02:41,066 --> 00:02:42,776
旁邊的加號按鈕

71
00:02:42,776 --> 00:02:43,976
選擇“創建促銷優惠”

72
00:02:47,306 --> 00:02:48,356
在這裡 你可以輸入

73
00:02:48,356 --> 00:02:50,236
易於理解的優惠名稱

74
00:02:50,236 --> 00:02:51,476
以及產品代碼

75
00:02:52,176 --> 00:02:53,546
這個產品代碼

76
00:02:53,546 --> 00:02:54,476
也就是標識符

77
00:02:55,446 --> 00:02:57,586
從這開始 你將使用這個特定的標識符

78
00:02:57,586 --> 00:02:58,846
來指代這個優惠

79
00:03:00,216 --> 00:03:01,696
之後就和試用優惠的設置

80
00:03:01,696 --> 00:03:02,406
非常相似了

81
00:03:02,666 --> 00:03:04,116
你需要選擇類型

82
00:03:04,116 --> 00:03:05,166
時長以及價格

83
00:03:05,636 --> 00:03:06,926
除了設置這些優惠之外

84
00:03:07,546 --> 00:03:10,696
你還需要設置一個私鑰

85
00:03:10,696 --> 00:03:12,216
以便生成之前提及的簽名

86
00:03:12,216 --> 00:03:15,146
我們之後再進一步討論這個簽名

87
00:03:15,146 --> 00:03:17,116
創建你的私鑰

88
00:03:17,856 --> 00:03:18,816
你需要進入

89
00:03:18,816 --> 00:03:20,156
App Store Connect 的“用戶與訪問”

90
00:03:21,066 --> 00:03:22,286
選擇“密鑰”

91
00:03:22,286 --> 00:03:23,816
並確保選擇左側的“訂閱”

92
00:03:24,246 --> 00:03:26,286
點按加號按鈕

93
00:03:27,576 --> 00:03:28,816
輸入易於理解的密鑰的名字

94
00:03:28,816 --> 00:03:29,976
並點按“生成”

95
00:03:34,476 --> 00:03:35,756
之後你就可以

96
00:03:35,756 --> 00:03:37,276
在上方的“活躍”密鑰列表中

97
00:03:37,526 --> 00:03:38,176
發現這個新建的密鑰

98
00:03:39,276 --> 00:03:40,176
你也會發現

99
00:03:40,176 --> 00:03:41,686
App Store Connect 已經為它生成了

100
00:03:41,686 --> 00:03:42,956
一個密鑰 ID

101
00:03:43,206 --> 00:03:44,156
這也是一個

102
00:03:44,156 --> 00:03:45,276
特定的標識符

103
00:03:45,276 --> 00:03:45,976
用來在 StoreKit 中引用這個密鑰

104
00:03:49,046 --> 00:03:49,666
現在你可以

105
00:03:49,666 --> 00:03:50,836
下載你的私鑰

106
00:03:51,276 --> 00:03:52,246
只需點按“下載密鑰”

107
00:03:52,756 --> 00:03:53,976
但是重要的一點需要注意

108
00:03:53,976 --> 00:03:56,446
你僅可以下載一次這個密鑰

109
00:03:57,356 --> 00:03:58,816
沒有錯 只有一次

110
00:03:59,736 --> 00:04:00,986
一旦你下載了它

111
00:04:00,986 --> 00:04:01,966
App Store Connect 將會

112
00:04:01,966 --> 00:04:03,256
永久地從 Apple 服務器中刪除它

113
00:04:03,256 --> 00:04:06,076
這麼處理的原因是

114
00:04:06,076 --> 00:04:09,626
這些密鑰是非常敏感的加密信息

115
00:04:10,226 --> 00:04:12,196
這個私鑰就像是你的身份

116
00:04:12,316 --> 00:04:14,786
它被用來證明授權用戶

117
00:04:14,786 --> 00:04:16,976
兌換這筆交易的是你本人

118
00:04:22,236 --> 00:04:23,716
如果你在你的所有 App 中

119
00:04:23,716 --> 00:04:25,516
以及為這些 App 設置的優惠中

120
00:04:25,666 --> 00:04:27,176
都使用了同一個密鑰

121
00:04:27,176 --> 00:04:29,216
那麼這些密鑰將在

122
00:04:29,216 --> 00:04:30,776
你的整個開發者帳戶中生效

123
00:04:31,926 --> 00:04:33,336
但是你也可以按照喜好

124
00:04:33,336 --> 00:04:33,996
使用多個密鑰

125
00:04:34,546 --> 00:04:35,756
如果你使用

126
00:04:35,756 --> 00:04:37,296
一個開發者帳戶來服務

127
00:04:37,566 --> 00:04:39,046
多個 App 或不同的業務組分

128
00:04:39,046 --> 00:04:42,706
那麼你可以創建多個密鑰

129
00:04:42,706 --> 00:04:44,566
來將它們分割開

130
00:04:44,816 --> 00:04:46,516
就像我所提到的

131
00:04:46,656 --> 00:04:49,416
每筆交易都需要一個加密簽名

132
00:04:49,416 --> 00:04:50,686
你需要把它發送到 App Store

133
00:04:50,686 --> 00:04:50,936
來兌換優惠

134
00:04:53,546 --> 00:04:54,716
現在 為了確保只有授權用戶才能兌換優惠

135
00:04:54,716 --> 00:04:57,866
我們需要做出如下的設置

136
00:04:58,846 --> 00:05:00,766
使用有效載荷生成一個簽名

137
00:05:00,766 --> 00:05:02,766
你同樣需要將這個有效載荷

138
00:05:02,766 --> 00:05:03,386
發送到 App Store

139
00:05:04,396 --> 00:05:07,116
這個簽名運用了一個叫“非對稱加密”的東西

140
00:05:07,736 --> 00:05:11,376
非對稱加密 是一個十分常見的技術

141
00:05:11,426 --> 00:05:12,976
它使用兩個密鑰來生成

142
00:05:12,976 --> 00:05:14,996
並驗證簽名

143
00:05:14,996 --> 00:05:16,616
而不僅僅是我們剛才討論的私鑰

144
00:05:17,276 --> 00:05:18,596
我們使用私鑰作為你身份的證明

145
00:05:18,596 --> 00:05:20,366
來簽署你的有效載荷

146
00:05:20,366 --> 00:05:23,646
第二個密鑰 叫做公鑰

147
00:05:24,666 --> 00:05:25,546
就像它的字面意思

148
00:05:25,616 --> 00:05:27,276
這個公鑰實際上

149
00:05:27,276 --> 00:05:28,016
可以顯示給其他人

150
00:05:28,186 --> 00:05:29,936
你不能用它 生成任何簽名

151
00:05:30,566 --> 00:05:31,406
使用公鑰所能做的一切

152
00:05:31,406 --> 00:05:33,596
就是證明該簽名

153
00:05:33,676 --> 00:05:35,106
是用你的私鑰生成的

154
00:05:35,106 --> 00:05:36,966
並與你用來簽署的

155
00:05:36,966 --> 00:05:37,496
有效負載匹配

156
00:05:41,046 --> 00:05:42,346
由於生成簽名

157
00:05:42,776 --> 00:05:44,056
需要使用你的私鑰

158
00:05:44,526 --> 00:05:45,596
所以你應該始終在

159
00:05:45,596 --> 00:05:47,256
安全服務器上進行

160
00:05:47,256 --> 00:05:48,516
而不是從設備本身進行

161
00:05:48,516 --> 00:05:49,356
因為你一定不想

162
00:05:49,736 --> 00:05:51,086
將這段加密信息

163
00:05:51,086 --> 00:05:52,516
放在其他人的硬件上

164
00:05:53,706 --> 00:05:55,106
我們現在看一看

165
00:05:55,106 --> 00:05:56,806
我們利用 NodeJS 和 Express

166
00:05:56,806 --> 00:05:57,966
構建的服務器

167
00:05:58,156 --> 00:06:00,066
這實際上是可以

168
00:06:00,066 --> 00:06:01,406
在網上下載到的示例代碼

169
00:06:02,566 --> 00:06:03,746
如果你不使用 JavaScript

170
00:06:03,826 --> 00:06:04,286
也不用擔心

171
00:06:05,056 --> 00:06:06,216
這裡展示的一切成果

172
00:06:06,216 --> 00:06:07,706
都可以以其他語言完成

173
00:06:08,046 --> 00:06:11,206
比如 Python PHP Java Swift 等等

174
00:06:11,206 --> 00:06:12,546
選擇哪個都可以

175
00:06:16,346 --> 00:06:17,976
第一步

176
00:06:17,976 --> 00:06:19,246
當你的 App

177
00:06:19,246 --> 00:06:20,746
準備好向用戶展示優惠時

178
00:06:20,746 --> 00:06:21,806
你需要將這個請求

179
00:06:21,806 --> 00:06:22,806
發送到服務器

180
00:06:22,806 --> 00:06:23,686
然後生成一個簽名

181
00:06:25,336 --> 00:06:27,276
在本例中

182
00:06:27,276 --> 00:06:28,316
App 已經知道我們想要簽署的

183
00:06:28,366 --> 00:06:30,366
幾個有效載荷

184
00:06:30,366 --> 00:06:31,216
因此我們僅需

185
00:06:31,216 --> 00:06:33,066
在請求中的主題部分獲取它們

186
00:06:34,486 --> 00:06:35,386
我們將獲得 App 的

187
00:06:35,386 --> 00:06:38,006
套裝標識符

188
00:06:38,006 --> 00:06:39,666
訂閱的產品標識符

189
00:06:40,786 --> 00:06:41,876
以及優惠標識符

190
00:06:41,876 --> 00:06:43,146
對應的是你將展示給

191
00:06:43,356 --> 00:06:45,546
用戶的優惠

192
00:06:45,626 --> 00:06:48,516
最後我們會得到一個哈希 App 用戶名

193
00:06:49,426 --> 00:06:52,116
這是一個單向排序的安全哈希值

194
00:06:52,116 --> 00:06:55,696
包含一些關於用戶的標識信息

195
00:06:56,146 --> 00:06:57,316
也許是他們在你的 App 中的用戶名

196
00:06:57,316 --> 00:06:57,946
或者他們的郵箱

197
00:06:59,056 --> 00:06:59,956
但很重要的一點是

198
00:06:59,956 --> 00:07:01,106
你要對它進行哈希 處理

199
00:07:01,106 --> 00:07:03,196
並且永遠不要把純文本標識信息

200
00:07:03,196 --> 00:07:04,236
發送到 App Store

201
00:07:04,736 --> 00:07:05,586
你需要在自己的數據庫中

202
00:07:05,586 --> 00:07:05,976
保持這種安全性

203
00:07:09,336 --> 00:07:10,336
下一個有效載荷

204
00:07:10,336 --> 00:07:11,426
叫做“nonce”（唯一性參數）

205
00:07:12,586 --> 00:07:14,386
這只是一個隨機的數據片段

206
00:07:14,386 --> 00:07:17,486
以確保沒有兩個交易是相同的

207
00:07:17,486 --> 00:07:22,486
我們使用它來防止重放攻擊

208
00:07:22,486 --> 00:07:23,446
和其他繞過它的方法

209
00:07:23,446 --> 00:07:25,486
如此用戶將不能重新發送相同的請求

210
00:07:25,486 --> 00:07:27,606
在沒有你的批准下

211
00:07:27,606 --> 00:07:28,636
獲得多次的免費訂閱

212
00:07:29,196 --> 00:07:32,006
App Store 使用

213
00:07:32,006 --> 00:07:33,476
版本為 4 的 UUID

214
00:07:33,476 --> 00:07:33,966
這就是我們要創建的

215
00:07:36,146 --> 00:07:37,216
然後我們會得到一個時間戳

216
00:07:38,136 --> 00:07:39,306
這是自 Unix Epoch 格式以來的

217
00:07:39,306 --> 00:07:41,346
以毫秒為單位的時間戳

218
00:07:42,506 --> 00:07:44,256
這是一個十分常用的格式

219
00:07:44,256 --> 00:07:45,396
你可以看到

220
00:07:45,396 --> 00:07:46,466
在 JavaScript 中生成它十分容易

221
00:07:47,876 --> 00:07:49,336
這個時間戳

222
00:07:49,336 --> 00:07:51,196
也被用來幫助阻止攻擊

223
00:07:52,226 --> 00:07:56,066
重要的是你所做的每一筆交易

224
00:07:56,066 --> 00:07:57,916
將只在該時間戳之後的

225
00:07:58,026 --> 00:07:59,036
24 小時內被接受

226
00:07:59,496 --> 00:08:00,196
所以你不應該

227
00:08:00,196 --> 00:08:01,956
提前一周產生這些簽名

228
00:08:07,046 --> 00:08:08,426
有效載荷的最後一部分

229
00:08:08,426 --> 00:08:09,086
是密鑰 ID

230
00:08:09,346 --> 00:08:10,416
這個是 App Store Connect

231
00:08:10,416 --> 00:08:11,606
之前生成的密鑰 ID

232
00:08:14,116 --> 00:08:15,276
我在這裡植入了一個

233
00:08:15,276 --> 00:08:15,896
名為 getKeyID() 的函數

234
00:08:17,136 --> 00:08:18,116
我們要做的就是

235
00:08:18,116 --> 00:08:19,396
返回我們存儲在

236
00:08:19,396 --> 00:08:20,916
環境變量中的密鑰 ID

237
00:08:20,916 --> 00:08:24,796
我們這樣做

238
00:08:24,796 --> 00:08:26,436
而不是將它提交到代碼

239
00:08:26,436 --> 00:08:27,426
並將其放入存儲庫中

240
00:08:27,426 --> 00:08:28,226
是因為這樣更安全

241
00:08:29,426 --> 00:08:30,346
暴露更少的弱點

242
00:08:32,266 --> 00:08:33,196
如果你只返回了

243
00:08:33,196 --> 00:08:35,436
一個密鑰 ID

244
00:08:35,436 --> 00:08:36,476
但如果你使用多個密鑰

245
00:08:36,476 --> 00:08:38,326
這實際上是實現邏輯的

246
00:08:38,326 --> 00:08:39,395
理想位置

247
00:08:40,905 --> 00:08:43,096
或者 如果你確定

248
00:08:43,096 --> 00:08:44,466
你的一個密鑰被洩露了

249
00:08:44,466 --> 00:08:46,536
有人未經授權訪問了它

250
00:08:46,536 --> 00:08:48,196
你可以在 App Store Connect 中禁用它

251
00:08:48,796 --> 00:08:51,506
你可以生成一個新密鑰

252
00:08:51,546 --> 00:08:52,896
只需要切換這裡的邏輯

253
00:08:52,896 --> 00:08:54,016
就可以使用這裡的新密鑰

254
00:08:54,016 --> 00:08:54,896
來簽署它們

255
00:08:55,306 --> 00:08:58,756
你甚至不需要推送 App 更新

256
00:08:58,756 --> 00:08:59,596
這樣你可以把停運時間降到最低

257
00:09:01,156 --> 00:09:02,536
現在我們已經有了所有

258
00:09:02,536 --> 00:09:03,846
要簽署的有效載荷

259
00:09:04,796 --> 00:09:05,846
我們想把它們合併成

260
00:09:05,846 --> 00:09:07,966
一個數據塊來生成簽名

261
00:09:08,546 --> 00:09:11,336
現在你可以看到

262
00:09:11,336 --> 00:09:12,826
我們的方法是

263
00:09:12,986 --> 00:09:14,716
把它們按這個順序組合成一個字符串

264
00:09:15,776 --> 00:09:18,056
我們使用字符

265
00:09:18,056 --> 00:09:19,376
將它們連接起來

266
00:09:19,376 --> 00:09:21,226
每個字符之間的代碼點為“\u2063”

267
00:09:22,176 --> 00:09:23,386
好吧 我明白你們的疑惑

268
00:09:23,386 --> 00:09:24,196
為什麼我們不使用空格呢

269
00:09:25,126 --> 00:09:27,406
十分重要的一點是

270
00:09:27,406 --> 00:09:28,896
當你生成

271
00:09:28,896 --> 00:09:29,846
或驗證加密簽名時

272
00:09:29,846 --> 00:09:31,286
你要非常精確地知道

273
00:09:31,286 --> 00:09:32,536
你使用的是哪個字符

274
00:09:33,096 --> 00:09:33,986
正如你們中的一些人可能知道的

275
00:09:33,986 --> 00:09:35,236
單詞空格可以指

276
00:09:35,236 --> 00:09:37,056
多種不同類型的空白字符

277
00:09:37,796 --> 00:09:39,236
所以我們使用這個

278
00:09:42,046 --> 00:09:43,796
現在我們有了有效載荷

279
00:09:43,796 --> 00:09:45,316
下一步是得到密鑰本身

280
00:09:46,066 --> 00:09:49,366
我們使用 getKeyStringForID(keyID)

281
00:09:51,386 --> 00:09:52,206
我們要做的就是檢查

282
00:09:52,206 --> 00:09:53,736
確保密鑰 ID

283
00:09:53,736 --> 00:09:54,926
和我們的期望匹配

284
00:09:54,926 --> 00:09:57,166
然後我們將從另一個環境變量

285
00:09:57,166 --> 00:09:58,416
返回密鑰

286
00:09:58,416 --> 00:10:01,636
這裡我使用的是

287
00:10:01,636 --> 00:10:02,676
字符串中的密鑰

288
00:10:03,196 --> 00:10:05,036
它以 PEM 格式記錄

289
00:10:06,046 --> 00:10:07,236
這是一個十分常見的格式

290
00:10:07,236 --> 00:10:08,166
App Store Connect

291
00:10:08,166 --> 00:10:09,736
會把它發送給你

292
00:10:10,086 --> 00:10:11,396
幾乎任何第三方

293
00:10:11,396 --> 00:10:13,266
或第一方的庫

294
00:10:13,266 --> 00:10:13,976
都能處理它

295
00:10:19,056 --> 00:10:20,516
我們有了密鑰有效載荷

296
00:10:21,036 --> 00:10:21,936
我們準備好簽署了

297
00:10:24,246 --> 00:10:25,826
我們在這裡做的是

298
00:10:25,886 --> 00:10:27,416
創建一個橢圓曲線

299
00:10:27,416 --> 00:10:29,176
數字簽名算法對象

300
00:10:29,176 --> 00:10:30,986
這聽起來很神奇

301
00:10:30,986 --> 00:10:31,386
但很容易做到

302
00:10:31,386 --> 00:10:32,436
正如你所看到的

303
00:10:32,436 --> 00:10:34,336
這裡只有一行使用了 NodeJS 中的

304
00:10:34,336 --> 00:10:35,786
JavaScript 語言的 ECKey 庫代碼

305
00:10:37,186 --> 00:10:38,826
其他語言的庫

306
00:10:38,826 --> 00:10:39,756
也使它變得非常簡單

307
00:10:41,056 --> 00:10:42,256
我們傳入密鑰字符串

308
00:10:42,256 --> 00:10:43,706
並告訴它 它是 PEM 格式

309
00:10:44,436 --> 00:10:46,776
我們將把這個

310
00:10:46,906 --> 00:10:48,606
cryptoSign 對象作為

311
00:10:48,606 --> 00:10:49,836
NodeJS 的加密庫的一部分

312
00:10:50,676 --> 00:10:51,476
我們要告訴它

313
00:10:51,476 --> 00:10:53,196
使用 SHA256 哈希算法

314
00:10:54,236 --> 00:10:55,776
這是你一直應該使用的算法

315
00:10:55,776 --> 00:10:56,736
無論你使用什麼庫

316
00:10:56,736 --> 00:10:58,676
你都應該確保指定它

317
00:11:01,226 --> 00:11:02,346
接下來 我們把有效負載

318
00:11:02,346 --> 00:11:03,316
添加到這個 cryptoSign 對象

319
00:11:03,636 --> 00:11:04,636
它只是告訴我們

320
00:11:04,636 --> 00:11:06,336
這是我們用來生成簽名的東西

321
00:11:09,216 --> 00:11:11,326
最終 生成簽名

322
00:11:11,906 --> 00:11:14,236
這裡的加密庫

323
00:11:14,236 --> 00:11:15,296
在默認情況下

324
00:11:15,296 --> 00:11:17,996
以 DER 格式生成簽名

325
00:11:19,096 --> 00:11:20,346
大多數情況都是這樣的

326
00:11:20,346 --> 00:11:21,716
但如果你的庫默認情況下

327
00:11:21,716 --> 00:11:23,216
不使用這個格式

328
00:11:23,216 --> 00:11:24,036
請確保在這裡指定 DER

329
00:11:25,766 --> 00:11:27,186
它不會返回

330
00:11:27,186 --> 00:11:29,666
一大堆原始的加密字節

331
00:11:30,406 --> 00:11:31,696
我們要求它發送一個

332
00:11:31,696 --> 00:11:33,376
Base64 編碼的字符串

333
00:11:34,306 --> 00:11:35,216
這使得將數據

334
00:11:35,216 --> 00:11:37,916
從服務器傳輸到設備

335
00:11:37,916 --> 00:11:39,016
非常容易

336
00:11:39,016 --> 00:11:41,446
這也是 StoreKit 使用的格式

337
00:11:46,346 --> 00:11:47,426
現在我們有了我們的簽名

338
00:11:48,876 --> 00:11:51,886
下一步是做一些驗證

339
00:11:51,886 --> 00:11:53,626
你不必每次

340
00:11:53,626 --> 00:11:55,606
都進行這種驗證

341
00:11:55,606 --> 00:11:57,016
但是當你在自己的服務器上

342
00:11:57,016 --> 00:11:58,916
編寫簽名生成代碼時

343
00:11:59,176 --> 00:12:00,226
這樣做確實很有幫助

344
00:12:00,226 --> 00:12:02,886
只是為了確保沒有錯誤

345
00:12:02,886 --> 00:12:03,766
或者什麼奇怪的事情發生

346
00:12:04,786 --> 00:12:06,436
它的作用是

347
00:12:06,496 --> 00:12:07,906
基於你的私鑰

348
00:12:07,906 --> 00:12:09,836
生成一個公鑰

349
00:12:09,836 --> 00:12:10,966
然後像 App Store 一樣

350
00:12:10,966 --> 00:12:11,516
驗證你的簽名和有效載荷

351
00:12:13,046 --> 00:12:15,186
最後 剩下的就是將簽名

352
00:12:15,186 --> 00:12:17,176
連同我們在這裡生成的

353
00:12:17,176 --> 00:12:18,196
這些有效負載片段

354
00:12:18,196 --> 00:12:19,576
包括 密鑰 ID  nonce 和時間戳

355
00:12:19,576 --> 00:12:20,976
一起發送回設備

356
00:12:25,326 --> 00:12:26,286
現在你已經設置好服務器

357
00:12:26,286 --> 00:12:27,286
來生成這些簽名

358
00:12:27,286 --> 00:12:30,976
下一步就是設置 App

359
00:12:30,976 --> 00:12:34,536
發出請求併發送交易

360
00:12:36,096 --> 00:12:38,076
首先要做的是

361
00:12:38,346 --> 00:12:39,696
獲取優惠細節

362
00:12:40,086 --> 00:12:41,016
這些你當然都可在 App Store Connect 中

363
00:12:41,016 --> 00:12:44,766
通過 SKProducts 請求進行設置

364
00:12:47,326 --> 00:12:48,386
我們將添加一些代碼

365
00:12:48,386 --> 00:12:49,756
來發送簽名請求到服務器

366
00:12:49,756 --> 00:12:50,976
並運行我們剛剛講過的代碼

367
00:12:54,046 --> 00:12:55,066
具體執行時

368
00:12:55,066 --> 00:12:57,166
一個好的策略是

369
00:12:57,166 --> 00:12:58,566
在用戶準備購買時

370
00:12:58,566 --> 00:12:59,966
發送簽名請求

371
00:13:00,946 --> 00:13:02,536
我們建議你

372
00:13:02,536 --> 00:13:04,406
在展示你的故事線

373
00:13:04,406 --> 00:13:05,356
或向用戶展示這個優惠之前

374
00:13:05,356 --> 00:13:06,006
發送簽名請求

375
00:13:07,126 --> 00:13:08,236
這樣做不僅是因為

376
00:13:08,236 --> 00:13:09,256
24 小時的

377
00:13:09,256 --> 00:13:11,006
時間戳限制

378
00:13:11,006 --> 00:13:11,736
還因為這樣你就可以

379
00:13:11,776 --> 00:13:13,136
從自己的服務器中獲得最新的業務邏輯

380
00:13:13,926 --> 00:13:15,536
你可能已經換了密鑰

381
00:13:15,536 --> 00:13:16,886
或者你有了關於你的用戶的

382
00:13:16,886 --> 00:13:18,086
新的資格信息

383
00:13:18,086 --> 00:13:19,296
從而使你決定

384
00:13:19,296 --> 00:13:20,276
是否向其發送優惠信息

385
00:13:20,986 --> 00:13:22,126
你希望所有這些

386
00:13:22,126 --> 00:13:22,976
都是最新的

387
00:13:26,066 --> 00:13:27,176
最後 我們將處理

388
00:13:27,176 --> 00:13:28,546
來自服務器的響應

389
00:13:28,546 --> 00:13:29,976
然後將交易發送到 App Store

390
00:13:34,486 --> 00:13:35,776
當你發出 SKProducts 請求時

391
00:13:35,776 --> 00:13:38,726
你將注意到在每個 SKProduct 上

392
00:13:38,726 --> 00:13:40,226
都有一個用於訂閱優惠的新屬性

393
00:13:40,626 --> 00:13:41,426
它就是 discounts

394
00:13:42,716 --> 00:13:45,596
這是一個 SKProductDiscount 對象數組

395
00:13:46,976 --> 00:13:48,076
你可能會認出

396
00:13:48,076 --> 00:13:49,606
SKProductDiscount

397
00:13:49,606 --> 00:13:50,646
因為它與我們用於

398
00:13:50,646 --> 00:13:52,006
試用優惠的模型相同

399
00:13:52,006 --> 00:13:52,586
因為它們非常相似

400
00:13:53,146 --> 00:13:55,486
你可以看到

401
00:13:55,486 --> 00:13:58,166
它有價格 訂閱時長等信息

402
00:13:59,276 --> 00:14:00,616
但我們還為訂閱優惠

403
00:14:00,616 --> 00:14:01,976
添加了兩個新屬性

404
00:14:04,576 --> 00:14:06,816
其中一個是 identifier

405
00:14:06,816 --> 00:14:08,016
這是你在 App Store Connect 中

406
00:14:08,016 --> 00:14:08,986
添加的產品代碼

407
00:14:10,106 --> 00:14:11,756
它是可選的

408
00:14:11,756 --> 00:14:13,226
因為試用優惠並沒有標識符

409
00:14:13,226 --> 00:14:14,496
所以它在那裡為 nil

410
00:14:14,746 --> 00:14:17,106
但是對於每一個訂閱優惠而言

411
00:14:17,106 --> 00:14:22,516
它是存在的 我們添加了一個類型

412
00:14:23,186 --> 00:14:24,206
這是一個數組

413
00:14:24,206 --> 00:14:25,476
它會告訴你

414
00:14:25,636 --> 00:14:26,966
這是一個訂閱優惠

415
00:14:26,966 --> 00:14:27,686
還是一個試用優惠

416
00:14:29,166 --> 00:14:30,976
然而 你永遠不會在 discounts 數組中

417
00:14:30,976 --> 00:14:31,646
獲得試用優惠

418
00:14:32,276 --> 00:14:33,576
那些將只會存在於

419
00:14:33,576 --> 00:14:35,696
SKProduct 的試用價格屬性中

420
00:14:40,076 --> 00:14:41,636
這樣你已經準備好向用戶

421
00:14:41,636 --> 00:14:42,396
展示你的優惠了

422
00:14:42,576 --> 00:14:43,736
第一步是向服務器

423
00:14:43,736 --> 00:14:44,716
發送一個請求

424
00:14:44,776 --> 00:14:45,746
來獲取優惠細節

425
00:14:49,056 --> 00:14:50,836
在本例中

426
00:14:51,166 --> 00:14:54,856
我們將傳入 App 用戶名的哈希版本

427
00:14:54,856 --> 00:14:56,116
訂閱的產品標識符

428
00:14:57,806 --> 00:14:58,716
以及優惠標識符

429
00:14:58,716 --> 00:15:00,676
這裡 我們的服務器

430
00:15:00,676 --> 00:15:02,416
已經知道我們使用的是什麼 App 套裝 ID

431
00:15:03,236 --> 00:15:07,156
它會運行所有我們提及的代碼

432
00:15:07,156 --> 00:15:11,296
然後返回一個 nonce 一個時間戳 一個密鑰標識符

433
00:15:11,296 --> 00:15:12,616
當然還有

434
00:15:12,616 --> 00:15:15,896
在 Base64 格式字符串中的簽名本身

435
00:15:18,056 --> 00:15:20,376
我們不會詳細討論如何發出

436
00:15:20,376 --> 00:15:22,246
安全的 HTTPS 請求和響應

437
00:15:22,326 --> 00:15:23,896
有許多關於這點的資源可供參考

438
00:15:24,526 --> 00:15:25,816
我們將繼續

439
00:15:25,816 --> 00:15:26,786
把目光放在 completion() 代碼塊中

440
00:15:30,226 --> 00:15:32,956
你需要對所有這些信息進行處理

441
00:15:32,956 --> 00:15:35,296
創建這個名為 SKPaymentDiscount 的新類

442
00:15:36,626 --> 00:15:38,746
注意這裡是 SKPaymentDiscount

443
00:15:38,746 --> 00:15:39,946
而不是 SKProductDiscount

444
00:15:40,966 --> 00:15:42,436
SKProductDiscount

445
00:15:42,436 --> 00:15:44,196
是我們剛剛提到的

446
00:15:44,196 --> 00:15:45,806
它提供了你在 App Store Connect 中

447
00:15:45,806 --> 00:15:46,566
設置的優惠的詳細信息

448
00:15:47,646 --> 00:15:49,796
這個 SKPaymentDiscount 實際上

449
00:15:49,796 --> 00:15:50,856
包含了有效負載

450
00:15:50,856 --> 00:15:51,876
和簽名的所有細節

451
00:15:52,266 --> 00:15:54,066
你需要使用它附加到支付上

452
00:15:54,066 --> 00:15:54,976
併發送到 StoreKit

453
00:15:58,276 --> 00:15:59,026
我們在這裡創建一個

454
00:15:59,026 --> 00:16:00,646
把這些細節

455
00:16:00,696 --> 00:16:02,076
傳遞到初始化器

456
00:16:02,076 --> 00:16:03,066
然後返回到 completion() 代碼塊中

457
00:16:03,066 --> 00:16:03,976
這樣我們便準備好顯示優惠

458
00:16:09,416 --> 00:16:10,866
當顧客輕點購買時

459
00:16:10,866 --> 00:16:12,406
我們將調用這裡的

460
00:16:12,406 --> 00:16:13,856
buyProduct 函數

461
00:16:13,856 --> 00:16:18,246
你需要確保訂閱本身

462
00:16:18,246 --> 00:16:20,586
具有 SKProduct

463
00:16:20,786 --> 00:16:23,306
用於生成簽名的

464
00:16:23,306 --> 00:16:24,126
相同的哈希 App 用戶名

465
00:16:24,126 --> 00:16:26,526
以及我們剛剛創建的

466
00:16:26,526 --> 00:16:27,646
SKPaymentDiscount

467
00:16:30,046 --> 00:16:31,876
從這裡開始設置就非常簡單了

468
00:16:32,606 --> 00:16:34,216
使用該產品

469
00:16:34,496 --> 00:16:35,136
創建一個新的 SKMutablePayment

470
00:16:37,086 --> 00:16:38,396
我們將設置 applicationUsername

471
00:16:41,046 --> 00:16:41,816
然後用 SKPaymentDiscount

472
00:16:41,816 --> 00:16:43,316
設置這個新的

473
00:16:43,316 --> 00:16:44,436
paymentDiscount 屬性

474
00:16:46,216 --> 00:16:47,186
就是這樣

475
00:16:48,366 --> 00:16:49,336
只需將支付

476
00:16:49,336 --> 00:16:50,456
添加到支付隊列中

477
00:16:51,086 --> 00:16:52,086
就像其他 App 內購買項目的設置

478
00:16:57,136 --> 00:16:58,016
除此之外

479
00:16:58,016 --> 00:16:59,586
我們還專門為訂閱優惠

480
00:16:59,586 --> 00:17:01,236
新添了 SKErrorCodes

481
00:17:02,886 --> 00:17:04,676
第一個是 invalidOfferIdentifier

482
00:17:05,456 --> 00:17:06,226
正如它的字面意思

483
00:17:06,226 --> 00:17:08,086
如果你試圖使用的

484
00:17:08,086 --> 00:17:09,465
優惠標識符丟失

485
00:17:09,806 --> 00:17:10,886
或者你在 App Store Connect 中禁用了它

486
00:17:10,886 --> 00:17:12,705
就會返回這個代碼

487
00:17:14,596 --> 00:17:16,626
下一個是 invalidOfferPrice

488
00:17:17,586 --> 00:17:18,925
App Store 實際上

489
00:17:18,925 --> 00:17:20,286
會對現收現付的訂閱優惠

490
00:17:20,286 --> 00:17:21,935
進行價格驗證

491
00:17:22,556 --> 00:17:23,526
我們想要確保

492
00:17:23,526 --> 00:17:25,415
優惠的價格

493
00:17:25,455 --> 00:17:26,736
比訂閱本身的基礎價格更低

494
00:17:27,346 --> 00:17:29,455
因為可能會發生這種情況

495
00:17:29,455 --> 00:17:31,116
你設定了一個優惠

496
00:17:31,116 --> 00:17:32,136
然後你又降低了

497
00:17:32,136 --> 00:17:32,806
基礎訂閱的價格

498
00:17:32,806 --> 00:17:33,856
我們要確保

499
00:17:33,856 --> 00:17:34,826
這確實是一個折扣

500
00:17:37,046 --> 00:17:38,216
然而 App Store 不為

501
00:17:38,216 --> 00:17:39,536
預付費訂閱優惠

502
00:17:39,606 --> 00:17:41,296
進行價格驗證

503
00:17:42,276 --> 00:17:43,806
原因是我們希望

504
00:17:43,806 --> 00:17:45,906
你能夠創建套裝

505
00:17:45,906 --> 00:17:47,866
例如 如果你開始運營

506
00:17:47,866 --> 00:17:48,546
一個全新的

507
00:17:48,546 --> 00:17:50,916
基於訂閱的遊戲

508
00:17:50,916 --> 00:17:52,416
你可能想給一些用戶一個優惠

509
00:17:52,416 --> 00:17:55,696
比如三個月的訂閱訪問

510
00:17:55,696 --> 00:17:58,956
附贈一個額外的傳奇裝備

511
00:17:58,956 --> 00:18:00,326
或者經驗包之類的贈品

512
00:18:00,326 --> 00:18:01,406
相比於僅僅三個月的訂閱

513
00:18:01,406 --> 00:18:01,976
提供更多的價值

514
00:18:06,416 --> 00:18:08,416
下一個錯誤代碼是 invalidSignature

515
00:18:10,036 --> 00:18:11,296
如果你發送的簽名

516
00:18:11,296 --> 00:18:13,106
不能與你之前告訴我們

517
00:18:13,106 --> 00:18:14,496
你所使用的私鑰

518
00:18:14,586 --> 00:18:16,726
或者與你發送的有效載荷

519
00:18:17,136 --> 00:18:19,646
進行驗證匹配

520
00:18:19,646 --> 00:18:20,446
這意味著在這兩者之間

521
00:18:20,446 --> 00:18:21,396
有什麼被更換了

522
00:18:21,396 --> 00:18:21,976
我們將發回這段代碼

523
00:18:26,056 --> 00:18:27,506
最後一個是 missingOfferParams

524
00:18:28,246 --> 00:18:30,306
如果你忘記發送

525
00:18:30,376 --> 00:18:31,906
或者你發送一個

526
00:18:31,906 --> 00:18:33,256
空字符串版本的有效載荷

527
00:18:33,256 --> 00:18:34,456
你會收到這段代碼

528
00:18:35,696 --> 00:18:36,776
最常見的例子是

529
00:18:36,776 --> 00:18:38,036
忘記在 SKMutablePayment 上

530
00:18:38,036 --> 00:18:39,936
設置 App 用戶名

531
00:18:46,186 --> 00:18:47,106
我們剛才看到的這些代碼

532
00:18:47,106 --> 00:18:48,466
都可以在網上找到

533
00:18:49,486 --> 00:18:51,146
就像我說的

534
00:18:51,246 --> 00:18:52,816
你現在就可以下載 NodeJS 服務器

535
00:18:52,816 --> 00:18:54,016
並在本地運行

536
00:18:54,216 --> 00:18:55,336
這是一個隨時可以運行的 App

537
00:18:56,446 --> 00:18:57,406
我們看到的 Swift 代碼

538
00:18:57,406 --> 00:19:00,076
可以在這些文檔頁面上找到

539
00:19:00,076 --> 00:19:02,086
而且有更多關於它的詳細文檔

540
00:19:02,816 --> 00:19:04,046
另外 如果你有任何問題

541
00:19:04,556 --> 00:19:05,716
請在 3 點後

542
00:19:05,716 --> 00:19:06,646
到我們實驗室來

543
00:19:11,046 --> 00:19:13,196
現在我們已經討論了

544
00:19:13,196 --> 00:19:14,626
如何生成簽名

545
00:19:14,816 --> 00:19:15,676
以及如何將交易

546
00:19:15,676 --> 00:19:17,446
發送到 StoreKit

547
00:19:17,446 --> 00:19:19,646
你可能會想

548
00:19:19,646 --> 00:19:20,946
“很好 但是我應該將這些優惠發送給誰呢”

549
00:19:24,216 --> 00:19:26,046
正如我所說

550
00:19:26,046 --> 00:19:29,376
App Store 只執行一條規則

551
00:19:29,376 --> 00:19:30,466
每個想要兌換優惠的用戶

552
00:19:30,466 --> 00:19:32,986
必須在該 App 中訂閱過

553
00:19:32,986 --> 00:19:36,466
自動續訂的訂閱服務

554
00:19:36,726 --> 00:19:38,066
這包括了

555
00:19:38,066 --> 00:19:39,026
任何自動續訂的訂閱

556
00:19:39,336 --> 00:19:40,626
它不一定是

557
00:19:40,626 --> 00:19:41,416
你想要給出優惠的

558
00:19:41,416 --> 00:19:41,976
那個訂閱類別

559
00:19:44,046 --> 00:19:45,526
它可以來自任何訂閱組

560
00:19:45,586 --> 00:19:47,686
重復一下 並不需要匹配

561
00:19:50,256 --> 00:19:51,886
這既包括當前的訂閱用戶

562
00:19:51,886 --> 00:19:52,996
也包括那些

563
00:19:52,996 --> 00:19:54,266
已經退出並流失的訂閱用戶

564
00:19:54,886 --> 00:19:56,076
因此你可以使用優惠

565
00:19:56,076 --> 00:19:57,956
來留住用戶 或者重新召回用戶

566
00:20:01,516 --> 00:20:02,656
用戶從第一個訂閱期起

567
00:20:02,656 --> 00:20:04,466
便具有資格

568
00:20:05,696 --> 00:20:07,186
包括他們正處於

569
00:20:07,186 --> 00:20:09,466
一個免費或付費的試用優惠訂閱中

570
00:20:13,436 --> 00:20:15,166
記住這一點

571
00:20:15,166 --> 00:20:16,576
用來檢查以確保用戶

572
00:20:16,576 --> 00:20:17,766
確實符合條件的方法

573
00:20:17,796 --> 00:20:20,286
當然是查看收據

574
00:20:23,046 --> 00:20:24,906
其實很簡單

575
00:20:24,906 --> 00:20:25,536
你只需要查看

576
00:20:25,536 --> 00:20:26,166
in_app 數組

577
00:20:26,166 --> 00:20:27,376
或者 latest_receipt_info 數組

578
00:20:27,376 --> 00:20:30,336
如果它可用 並且瀏覽那裡的所有對象

579
00:20:30,806 --> 00:20:36,336
你需要查看每個產品 ID

580
00:20:37,066 --> 00:20:38,846
如果你發現一個產品 ID

581
00:20:38,846 --> 00:20:40,026
是自動更新訂閱

582
00:20:40,826 --> 00:20:41,456
那麼你就知道

583
00:20:41,456 --> 00:20:42,546
他們已經訂閱了

584
00:20:42,576 --> 00:20:44,396
因此他們有資格

585
00:20:44,396 --> 00:20:46,556
兌換該 App 中

586
00:20:46,556 --> 00:20:47,666
任何自動續訂訂閱的

587
00:20:47,666 --> 00:20:48,696
任何優惠

588
00:20:49,686 --> 00:20:51,916
但這只是 App Store 提出的資格條件

589
00:20:52,506 --> 00:20:53,536
十分簡單

590
00:20:54,086 --> 00:20:55,036
我們將更多的決定權交給你

591
00:20:56,146 --> 00:20:57,186
你一定希望

592
00:20:57,186 --> 00:20:58,136
實現自己的業務規則

593
00:20:58,136 --> 00:21:00,246
以確定向哪些客戶展示優惠

594
00:21:00,246 --> 00:21:01,926
以及向他們展示哪些優惠

595
00:21:04,046 --> 00:21:05,846
為了給你們一些實用的

596
00:21:05,846 --> 00:21:06,836
關於這個內容的建議和見解

597
00:21:07,536 --> 00:21:08,546
我想請我的同事

598
00:21:08,546 --> 00:21:09,406
Michael 上台

599
00:21:10,516 --> 00:21:13,616
[掌聲]

600
00:21:14,116 --> 00:21:14,506
>> 謝謝 Ross

601
00:21:15,016 --> 00:21:17,000
[掌聲]

602
00:21:20,476 --> 00:21:21,406
下午好

603
00:21:21,976 --> 00:21:23,346
我是 Michael Gargas

604
00:21:23,346 --> 00:21:24,896
我是 App Store 商業團隊的

605
00:21:24,896 --> 00:21:25,926
一名技術支持

606
00:21:26,526 --> 00:21:27,566
今天我很高興

607
00:21:27,566 --> 00:21:28,656
能和大家一起

608
00:21:29,376 --> 00:21:31,806
使用我們超棒的新功能

609
00:21:31,806 --> 00:21:33,206
訂閱優惠

610
00:21:33,456 --> 00:21:34,626
並討論用戶的資格 分配

611
00:21:34,766 --> 00:21:35,616
和自發流失

612
00:21:38,046 --> 00:21:39,626
作為開發者

613
00:21:39,626 --> 00:21:41,166
你可能會問自己一些

614
00:21:41,166 --> 00:21:42,486
關於 App 中

615
00:21:42,486 --> 00:21:45,516
用戶訂閱活動的問題

616
00:21:46,276 --> 00:21:47,536
比如

617
00:21:47,536 --> 00:21:49,086
我的大多數用戶什麼時候會流失

618
00:21:49,776 --> 00:21:50,866
是否已經有用戶流失了

619
00:21:51,886 --> 00:21:53,596
或者 為什麼用戶

620
00:21:53,596 --> 00:21:54,866
可能取消了他們的訂閱

621
00:21:56,416 --> 00:21:58,076
正如 Ross 提到的

622
00:21:58,076 --> 00:21:59,926
你可以通過 App 收據

623
00:21:59,926 --> 00:22:01,996
確定訂閱優惠的基本資格

624
00:22:02,826 --> 00:22:04,606
在 in_app 數組

625
00:22:04,606 --> 00:22:06,666
和 latest_receipt_info 中

626
00:22:06,726 --> 00:22:07,776
你將獲知該訂閱用戶

627
00:22:07,776 --> 00:22:10,286
或普通用戶之前的訂閱活動

628
00:22:11,326 --> 00:22:12,706
此外 我們將通過更新的

629
00:22:12,706 --> 00:22:14,486
服務器到服務器通知

630
00:22:14,676 --> 00:22:16,246
提供此信息

631
00:22:18,496 --> 00:22:19,666
但這只是關於

632
00:22:19,666 --> 00:22:22,476
用戶所訂閱的產品

633
00:22:23,356 --> 00:22:24,986
在 App 收據的內部

634
00:22:24,986 --> 00:22:26,506
我們提供了許多額外的

635
00:22:26,656 --> 00:22:28,806
有價值的用戶訂閱信息

636
00:22:30,026 --> 00:22:31,106
比如訂閱狀態

637
00:22:31,106 --> 00:22:33,506
我的用戶會在

638
00:22:33,506 --> 00:22:35,026
訂閱到期後續訂嗎

639
00:22:35,896 --> 00:22:38,136
或者我的用戶是否處於

640
00:22:38,606 --> 00:22:39,886
付款失敗狀態

641
00:22:40,086 --> 00:22:41,286
我們還提供了獨特標識符

642
00:22:41,316 --> 00:22:43,176
比如原始的交易 ID

643
00:22:43,176 --> 00:22:45,236
和 WEB 訂單行項目 ID

644
00:22:45,236 --> 00:22:47,236
以便你為服務器上的

645
00:22:47,236 --> 00:22:48,886
特定的用戶

646
00:22:49,136 --> 00:22:51,386
確定特定的訂閱

647
00:22:51,896 --> 00:22:55,016
我們提供

648
00:22:55,016 --> 00:22:56,226
該用戶的訂閱日期

649
00:22:56,226 --> 00:22:57,976
例如當前期間的訂閱開始日期

650
00:22:57,976 --> 00:22:59,836
和到期日期

651
00:22:59,836 --> 00:23:01,206
以及之前的所有續訂日期

652
00:23:01,746 --> 00:23:04,766
我們提供訂閱意圖

653
00:23:04,766 --> 00:23:06,376
讓你知道

654
00:23:06,376 --> 00:23:07,236
是否有人取消了訂閱

655
00:23:07,236 --> 00:23:08,806
以及他們為什麼

656
00:23:08,806 --> 00:23:09,346
要取消訂閱

657
00:23:09,696 --> 00:23:11,136
如果他們要求退款

658
00:23:11,516 --> 00:23:12,506
是你的 App 出了問題

659
00:23:12,506 --> 00:23:13,976
還是其他的什麼原因

660
00:23:16,356 --> 00:23:17,806
在去年的“Engineering Subscription”會議中

661
00:23:17,806 --> 00:23:19,816
我們討論了

662
00:23:19,816 --> 00:23:21,496
從 App 收據中

663
00:23:21,496 --> 00:23:23,236
存儲額外用戶數據的概念

664
00:23:24,046 --> 00:23:25,446
這裡我們有一個

665
00:23:25,446 --> 00:23:26,616
查看用戶的

666
00:23:26,616 --> 00:23:28,826
訂閱到期日期的示例

667
00:23:28,826 --> 00:23:30,586
將其存儲在服務器上

668
00:23:30,626 --> 00:23:32,196
並確定該用戶不再符合

669
00:23:32,196 --> 00:23:33,826
訂閱服務的資格

670
00:23:34,366 --> 00:23:37,566
我們也在此基礎上

671
00:23:37,566 --> 00:23:38,736
並討論了

672
00:23:38,776 --> 00:23:40,226
從 /verifyReceipt 存儲

673
00:23:40,226 --> 00:23:41,476
額外的訂閱用戶狀態欄

674
00:23:41,986 --> 00:23:45,226
然後從響應中

675
00:23:45,226 --> 00:23:47,266
解析出特定的欄

676
00:23:47,266 --> 00:23:48,466
比如 autoRenewStatus

677
00:23:51,046 --> 00:23:53,086
此外

678
00:23:53,086 --> 00:23:55,156
我們建議你現在保存

679
00:23:55,156 --> 00:23:58,476
來自服務器到服務器通知的狀態更改

680
00:23:58,476 --> 00:24:00,056
因為我們也正在

681
00:24:00,056 --> 00:24:01,106
將統一的 App 收據

682
00:24:01,266 --> 00:24:02,976
包含在這些服務器到服務器通知中

683
00:24:05,436 --> 00:24:07,206
這是 Apple 提供給你的

684
00:24:07,206 --> 00:24:08,616
關於你的 App 中

685
00:24:08,616 --> 00:24:10,846
訂閱用戶和普通用戶的數據

686
00:24:12,036 --> 00:24:14,756
作為一名開發者

687
00:24:14,756 --> 00:24:16,916
你的 App 中有許多

688
00:24:16,916 --> 00:24:18,606
Apple 沒有的

689
00:24:18,606 --> 00:24:20,446
關於用戶訂閱活動的

690
00:24:20,446 --> 00:24:21,176
附加信息

691
00:24:22,496 --> 00:24:24,276
通過獲取這些信息

692
00:24:24,276 --> 00:24:26,516
並將其與

693
00:24:26,516 --> 00:24:27,936
我們在購買或續訂行為之後

694
00:24:27,936 --> 00:24:29,726
提供的 JSOJN 數據結合起來

695
00:24:29,726 --> 00:24:32,056
你就可以開始為用戶群體

696
00:24:32,576 --> 00:24:34,486
策劃特定的優惠

697
00:24:35,486 --> 00:24:37,436
隨著時間的推移

698
00:24:37,436 --> 00:24:38,996
你可以使用關鍵的訂閱指標

699
00:24:38,996 --> 00:24:40,896
如轉化率 參與度

700
00:24:41,126 --> 00:24:42,796
保留率和客戶流失率

701
00:24:43,276 --> 00:24:45,456
來監視這些用戶群體

702
00:24:45,816 --> 00:24:47,096
如何對優惠做出響應

703
00:24:47,686 --> 00:24:51,336
為了更直觀地瞭解這一點

704
00:24:51,336 --> 00:24:54,366
讓我們看一下服務器上的

705
00:24:54,596 --> 00:24:55,366
一個用戶表的示例

706
00:24:58,146 --> 00:25:00,676
這裡我們看到

707
00:25:00,676 --> 00:25:02,886
按 userId 和 originalTransactionId 排序的用戶

708
00:25:02,886 --> 00:25:04,906
originalTransactionId 是特定用戶的

709
00:25:04,906 --> 00:25:06,616
任何訂閱購買的

710
00:25:06,616 --> 00:25:08,066
父特定標識符

711
00:25:08,606 --> 00:25:11,426
正如我們所說

712
00:25:11,426 --> 00:25:13,726
你可以開始在 App 收據中

713
00:25:13,726 --> 00:25:15,396
添加額外的用戶信息

714
00:25:15,396 --> 00:25:17,256
比如用戶的

715
00:25:17,396 --> 00:25:19,376
自動續訂狀態

716
00:25:19,376 --> 00:25:21,066
和賬單重試狀態

717
00:25:21,836 --> 00:25:23,206
但你不應該止步於此

718
00:25:24,086 --> 00:25:27,356
你可以將其與 App 中

719
00:25:27,356 --> 00:25:29,316
有關用戶活動的信息相結合

720
00:25:30,156 --> 00:25:31,506
這裡我們有一個

721
00:25:31,506 --> 00:25:32,476
contentConsumed 的例子

722
00:25:33,466 --> 00:25:34,676
contentConsumed 可以是觀看視頻

723
00:25:35,036 --> 00:25:38,326
閱讀文章 保存故事等等

724
00:25:41,076 --> 00:25:41,846
通過查看這些信息

725
00:25:41,846 --> 00:25:43,336
我們能夠確定

726
00:25:43,336 --> 00:25:44,926
哪些用戶

727
00:25:44,926 --> 00:25:46,646
有資格獲得訂閱優惠

728
00:25:46,646 --> 00:25:49,756
哪些沒有

729
00:25:52,266 --> 00:25:54,386
更進一步

730
00:25:54,386 --> 00:25:55,756
我們可以開始存儲額外的信息

731
00:25:55,756 --> 00:25:57,856
比如續訂

732
00:25:57,856 --> 00:26:00,156
用戶所經歷的

733
00:26:00,156 --> 00:26:01,146
賬單錯誤的數量

734
00:26:01,146 --> 00:26:03,186
以及他們是否有資格

735
00:26:03,186 --> 00:26:05,436
獲得特定類型的優惠

736
00:26:06,486 --> 00:26:08,226
正如 Ross 所提到的

737
00:26:08,226 --> 00:26:10,146
每個訂閱隊列

738
00:26:10,466 --> 00:26:11,516
最多可以有 10 個訂閱優惠

739
00:26:12,336 --> 00:26:13,496
這將允許你最多創建

740
00:26:13,496 --> 00:26:14,806
10 個不同的

741
00:26:14,806 --> 00:26:17,126
用戶群體來標識

742
00:26:17,126 --> 00:26:18,606
和分配訂閱優惠

743
00:26:19,176 --> 00:26:22,066
如果我們看一下

744
00:26:22,066 --> 00:26:24,186
服務器上的三個示例用戶

745
00:26:24,186 --> 00:26:27,916
你將看到

746
00:26:27,916 --> 00:26:29,086
根據他們的訂閱活動

747
00:26:29,836 --> 00:26:32,166
當用戶在免費試用期間

748
00:26:32,166 --> 00:26:34,996
禁用了自動續訂功能

749
00:26:35,186 --> 00:26:36,596
且訂閱到期後並未續訂時

750
00:26:36,596 --> 00:26:38,236
我們已經能夠

751
00:26:38,466 --> 00:26:39,276
使他們有資格獲得

752
00:26:39,276 --> 00:26:39,816
諸如回歸獎勵之類的優惠

753
00:26:40,396 --> 00:26:44,446
或者一個保留優惠

754
00:26:44,446 --> 00:26:45,926
指的是當前已訂閱

755
00:26:45,926 --> 00:26:47,526
但已禁用自動續訂功能的用戶

756
00:26:47,526 --> 00:26:48,756
你希望向他們展示保留優惠

757
00:26:48,756 --> 00:26:50,196
以便讓他們

758
00:26:50,196 --> 00:26:51,786
繼續訂閱你的服務

759
00:26:52,316 --> 00:26:55,806
還可以提供升級優惠

760
00:26:56,306 --> 00:26:57,466
找到那些在較低訂閱級別上

761
00:26:57,466 --> 00:26:59,306
如按月訂閱

762
00:26:59,306 --> 00:27:00,826
有連續續訂的用戶

763
00:27:00,826 --> 00:27:02,906
然後向他們

764
00:27:02,906 --> 00:27:04,106
提供訂閱優惠

765
00:27:04,336 --> 00:27:05,806
激勵他們升級到

766
00:27:05,806 --> 00:27:06,266
比如年度訂閱的高級訂閱級別

767
00:27:07,126 --> 00:27:10,316
這將通過

768
00:27:10,316 --> 00:27:11,946
更多的信息

769
00:27:11,946 --> 00:27:13,436
確定用戶資格

770
00:27:13,436 --> 00:27:15,016
而不僅僅是查看用戶

771
00:27:15,016 --> 00:27:16,826
之前是否在我的 App 中

772
00:27:16,826 --> 00:27:18,276
訂閱了我的訂閱產品

773
00:27:19,566 --> 00:27:21,126
在你構建了

774
00:27:21,126 --> 00:27:23,196
這個詳細的用戶資格之後

775
00:27:23,196 --> 00:27:24,706
下一步就是

776
00:27:24,706 --> 00:27:25,676
分配你的訂閱優惠

777
00:27:27,146 --> 00:27:28,726
讓我們來看看訂閱優惠

778
00:27:28,726 --> 00:27:30,826
可能採取的方式

779
00:27:31,956 --> 00:27:33,686
首先 正如我們所討論的

780
00:27:33,686 --> 00:27:35,856
你需要確定哪些用戶

781
00:27:35,856 --> 00:27:37,356
或用戶群體

782
00:27:37,356 --> 00:27:39,006
有資格獲得訂閱優惠

783
00:27:39,806 --> 00:27:40,886
然後你可以和這些用戶互動

784
00:27:40,886 --> 00:27:42,816
從 App Store 中

785
00:27:42,816 --> 00:27:44,176
獲取信息

786
00:27:44,516 --> 00:27:45,896
並呈現給你的用戶

787
00:27:47,116 --> 00:27:49,056
此時 用戶將有希望

788
00:27:49,056 --> 00:27:50,416
進行購買

789
00:27:50,416 --> 00:27:51,846
並兌換訂閱優惠

790
00:27:52,396 --> 00:27:54,566
如果我們回到我們的標識

791
00:27:54,706 --> 00:27:56,366
你可以看到我們標記了

792
00:27:56,366 --> 00:27:57,676
三個不同的用戶

793
00:27:57,676 --> 00:27:59,366
他們有資格獲得三種

794
00:27:59,366 --> 00:28:01,176
不同類型的訂閱優惠

795
00:28:03,116 --> 00:28:04,716
那麼你在哪裡

796
00:28:04,716 --> 00:28:05,356
展示這些信息呢

797
00:28:06,076 --> 00:28:09,546
如果用戶仍在

798
00:28:09,546 --> 00:28:10,896
使用你的 App

799
00:28:11,006 --> 00:28:12,736
但處於未訂閱狀態

800
00:28:13,036 --> 00:28:14,406
你可以通過 App 內發送信息

801
00:28:14,406 --> 00:28:15,886
或本地通知

802
00:28:15,886 --> 00:28:17,916
將訂閱優惠

803
00:28:17,916 --> 00:28:20,036
直接展示給用戶

804
00:28:21,276 --> 00:28:22,536
重要的是要理解

805
00:28:22,536 --> 00:28:24,316
你的 App 應該

806
00:28:24,316 --> 00:28:27,136
能為所有消費提供相應的價值

807
00:28:27,996 --> 00:28:29,366
當你鼓勵用戶

808
00:28:29,366 --> 00:28:31,166
消費某個優惠時

809
00:28:31,166 --> 00:28:32,926
你要仔細考慮這種推銷

810
00:28:32,926 --> 00:28:34,686
並確保你

811
00:28:34,686 --> 00:28:35,886
清楚地陳述了

812
00:28:35,886 --> 00:28:37,606
這個訂閱優惠的價值定位

813
00:28:37,606 --> 00:28:39,206
以及擬定

814
00:28:39,206 --> 00:28:40,136
用戶認可的條款

815
00:28:41,256 --> 00:28:42,876
和往常一樣

816
00:28:42,876 --> 00:28:44,126
你需要確保

817
00:28:44,126 --> 00:28:45,576
你遵守了最新的

818
00:28:45,716 --> 00:28:46,656
關於訂閱的 App 審查指南

819
00:28:47,746 --> 00:28:49,156
這是基於用戶

820
00:28:49,156 --> 00:28:51,046
仍然在使用你的 App 的情況

821
00:28:52,446 --> 00:28:53,756
如果用戶不再啓動 App

822
00:28:53,756 --> 00:28:54,776
又該如何呢

823
00:28:55,736 --> 00:28:57,086
這對於訂閱優惠而言

824
00:28:57,086 --> 00:28:57,896
又有什麼不同呢

825
00:29:00,266 --> 00:29:00,916
這裡我們可以

826
00:29:00,916 --> 00:29:02,996
看到標識階段

827
00:29:02,996 --> 00:29:04,176
但是我們還需要瞭解

828
00:29:04,176 --> 00:29:05,676
在你的 App 之外

829
00:29:05,676 --> 00:29:08,446
推廣訂閱優惠的能力

830
00:29:09,086 --> 00:29:13,016
你需要

831
00:29:13,016 --> 00:29:14,426
在 App Store

832
00:29:14,426 --> 00:29:16,236
或者說 在 App 之外

833
00:29:16,236 --> 00:29:18,066
展示這些訂閱優惠

834
00:29:18,066 --> 00:29:19,446
從而吸引這些老用戶

835
00:29:22,046 --> 00:29:23,406
現在 讓我們來談談

836
00:29:23,406 --> 00:29:25,896
在你的 App 之外展示優惠

837
00:29:27,116 --> 00:29:28,716
你可以使用

838
00:29:28,716 --> 00:29:30,426
現有的外部通道

839
00:29:30,516 --> 00:29:31,246
來分發對訂閱優惠操作的調用

840
00:29:33,046 --> 00:29:34,686
比如 你已經採用了

841
00:29:34,686 --> 00:29:36,276
付費廣告或電子郵件營銷

842
00:29:37,396 --> 00:29:40,046
然後使用通用鏈接

843
00:29:40,646 --> 00:29:45,316
將用戶從這些外部通道引導回 App

844
00:29:45,316 --> 00:29:48,456
並識別 他們可能接收到

845
00:29:48,516 --> 00:29:49,836
哪些訂閱優惠

846
00:29:52,186 --> 00:29:53,126
有關通用鏈接的

847
00:29:53,126 --> 00:29:54,676
更多信息

848
00:29:54,676 --> 00:29:56,056
我強烈建議你查看

849
00:29:56,056 --> 00:29:57,606
“What's New in Universal Links” 的會議

850
00:29:57,676 --> 00:29:59,586
你可在今年的

851
00:29:59,646 --> 00:30:01,806
WWDC App 中獲得會議內容

852
00:30:06,046 --> 00:30:06,736
我們現在已經討論了

853
00:30:06,736 --> 00:30:08,306
確定用戶資格

854
00:30:08,966 --> 00:30:09,896
以及在 App 內部

855
00:30:09,896 --> 00:30:11,276
或者通過現有的外部渠道

856
00:30:11,276 --> 00:30:14,826
向那些符合資格的用戶

857
00:30:14,826 --> 00:30:16,776
推廣訂閱優惠

858
00:30:18,336 --> 00:30:21,806
接下來讓我們談談一些

859
00:30:21,806 --> 00:30:23,026
可以利用在訂閱優惠上的策略

860
00:30:23,026 --> 00:30:25,366
幫助我們減少用戶流失

861
00:30:29,296 --> 00:30:30,626
在去年的“Engineering Subscription”中

862
00:30:30,626 --> 00:30:32,306
我們談到了

863
00:30:32,306 --> 00:30:34,576
用戶自主流失

864
00:30:34,576 --> 00:30:35,726
即用戶在訂閱期間

865
00:30:35,726 --> 00:30:38,406
主動取消訂閱的行為

866
00:30:39,546 --> 00:30:41,016
自主流失指的是

867
00:30:41,016 --> 00:30:42,246
用戶選擇

868
00:30:42,246 --> 00:30:43,066
離開你的訂閱產品

869
00:30:43,676 --> 00:30:45,166
這與非自主流失有所不同

870
00:30:45,166 --> 00:30:46,926
後者指的是用戶沒有做出任何選擇

871
00:30:47,176 --> 00:30:48,896
只是賬單問題導致的流失

872
00:30:50,336 --> 00:30:53,996
去年 我們給了你一些策略

873
00:30:54,166 --> 00:30:55,246
比如向那些自主流失的用戶

874
00:30:55,246 --> 00:30:57,786
提供其他可選的訂閱產品

875
00:30:58,446 --> 00:31:01,046
但這不是贏回客戶的好方法

876
00:31:01,736 --> 00:31:04,156
今年 我們將給出如下的建議

877
00:31:05,266 --> 00:31:07,006
我們希望你

878
00:31:07,006 --> 00:31:08,616
使用來自 App 收據的數據

879
00:31:08,986 --> 00:31:10,506
以及你所擁有的

880
00:31:10,716 --> 00:31:12,256
關於訂閱用戶

881
00:31:12,576 --> 00:31:13,916
如何在 App 中消費內容的信息

882
00:31:13,916 --> 00:31:16,566
來分析你的用戶訂閱行為

883
00:31:17,316 --> 00:31:18,506
我們想讓你

884
00:31:18,506 --> 00:31:19,866
使用這些信息

885
00:31:19,866 --> 00:31:21,916
並確定特定的用戶群體

886
00:31:22,576 --> 00:31:25,646
然後把你的訂閱優惠

887
00:31:25,646 --> 00:31:28,406
最好是匹配的訂閱優惠

888
00:31:28,406 --> 00:31:29,586
分配給

889
00:31:29,926 --> 00:31:31,526
不同的用戶群體

890
00:31:32,886 --> 00:31:36,036
在談到訂閱優惠時

891
00:31:36,356 --> 00:31:38,916
我們通常只考慮

892
00:31:38,916 --> 00:31:39,836
贏回未訂閱的用戶

893
00:31:40,866 --> 00:31:43,196
但我們想

894
00:31:43,196 --> 00:31:45,246
在此基礎上再擴展一下

895
00:31:45,246 --> 00:31:46,496
討論另外五種

896
00:31:46,496 --> 00:31:47,846
為你的訂閱用戶

897
00:31:48,106 --> 00:31:49,006
展示訂閱優惠的方式

898
00:31:49,656 --> 00:31:51,926
你可以利用訂閱優惠

899
00:31:51,926 --> 00:31:53,416
來進行用戶保留營銷

900
00:31:54,346 --> 00:31:56,326
當你看到

901
00:31:56,526 --> 00:31:58,106
用戶在訂閱到期後

902
00:31:58,106 --> 00:31:59,736
選擇不再續訂時

903
00:31:59,736 --> 00:32:01,126
你可以嘗試通過訂閱優惠

904
00:32:01,126 --> 00:32:01,886
來留住該客戶

905
00:32:03,326 --> 00:32:04,846
如果你掌握的信息

906
00:32:04,846 --> 00:32:05,946
使你相信在某個時間點

907
00:32:05,946 --> 00:32:07,766
這個用戶可能會流失

908
00:32:07,766 --> 00:32:10,176
那麼你可以為他們提供一個輓留優惠

909
00:32:10,176 --> 00:32:12,126
實質上是預測

910
00:32:12,126 --> 00:32:13,906
用戶可能會

911
00:32:13,986 --> 00:32:15,066
從 App 中流失

912
00:32:15,616 --> 00:32:17,796
你可以在 App 收據中

913
00:32:17,796 --> 00:32:19,026
查看用戶的訂閱活動

914
00:32:19,026 --> 00:32:20,036
和他們當前

915
00:32:20,036 --> 00:32:21,446
訂閱的產品

916
00:32:21,876 --> 00:32:23,306
你可以提供訂閱優惠

917
00:32:23,306 --> 00:32:25,086
從而在訂閱組中

918
00:32:25,086 --> 00:32:27,346
升級或降級該用戶

919
00:32:27,646 --> 00:32:31,786
此外 你還可以使用訂閱優惠

920
00:32:31,826 --> 00:32:33,206
來安撫可能在 App 中

921
00:32:33,206 --> 00:32:35,066
體驗不佳的用戶

922
00:32:36,376 --> 00:32:38,736
你也可以使用訂閱優惠

923
00:32:38,736 --> 00:32:40,106
來獎勵你最忠實的訂閱用戶

924
00:32:40,106 --> 00:32:43,596
讓我們來逐個探討

925
00:32:43,596 --> 00:32:45,596
並展示如何

926
00:32:45,596 --> 00:32:46,546
在 App 中

927
00:32:46,546 --> 00:32:48,826
向用戶展示這些訂閱優惠

928
00:32:50,236 --> 00:32:52,406
首先 讓我們看一個

929
00:32:52,406 --> 00:32:53,306
贏回用戶的例子

930
00:32:54,246 --> 00:32:55,796
這裡我們有一位

931
00:32:56,216 --> 00:32:59,146
在 26 日購買訂閱的用戶

932
00:33:00,236 --> 00:33:01,536
但是在訂閱期間中

933
00:33:02,406 --> 00:33:04,776
該用戶選擇取消

934
00:33:05,516 --> 00:33:06,526
他們致電 Apple Care

935
00:33:06,526 --> 00:33:07,656
並闡述對服務不滿意

936
00:33:07,656 --> 00:33:10,276
想要取消訂閱並退款

937
00:33:10,736 --> 00:33:12,786
正如我們在今天早些時候

938
00:33:12,786 --> 00:33:14,716
與你談論到的

939
00:33:14,716 --> 00:33:15,856
我們通過

940
00:33:15,856 --> 00:33:18,066
帶有取消日期等欄的收據

941
00:33:18,066 --> 00:33:19,396
讓你知道這一信息

942
00:33:19,396 --> 00:33:20,976
以便你立即知道

943
00:33:20,976 --> 00:33:22,296
退款 取消發生的時間

944
00:33:23,246 --> 00:33:25,256
以及取消原因

945
00:33:25,256 --> 00:33:26,906
這樣你就能知道

946
00:33:26,906 --> 00:33:29,126
是因為 App 本身還是其他原因

947
00:33:29,666 --> 00:33:32,086
我們還通過更新的

948
00:33:32,086 --> 00:33:33,316
服務器到服務器通知

949
00:33:33,316 --> 00:33:34,896
發送這些信息

950
00:33:34,896 --> 00:33:36,666
以便你能夠實時瞭解

951
00:33:36,666 --> 00:33:38,426
訂閱用戶

952
00:33:38,426 --> 00:33:39,756
和普通用戶的動態

953
00:33:40,306 --> 00:33:42,386
讓他們知道

954
00:33:42,386 --> 00:33:43,376
他們有其他的

955
00:33:43,376 --> 00:33:44,446
訂閱優惠選項

956
00:33:44,856 --> 00:33:47,516
我們進一步考慮這個問題

957
00:33:47,516 --> 00:33:49,086
我們希望從收據

958
00:33:49,086 --> 00:33:51,316
或者服務器到服務器的通知中

959
00:33:51,316 --> 00:33:53,466
獲取信息

960
00:33:53,466 --> 00:33:55,596
比如自動續訂狀態

961
00:33:55,596 --> 00:33:57,386
過期意圖 等等

962
00:33:57,386 --> 00:33:59,976
我們想把它存儲在服務器上

963
00:34:01,556 --> 00:34:03,746
標記那些

964
00:34:03,746 --> 00:34:05,136
可享受回歸優惠的用戶

965
00:34:05,836 --> 00:34:06,856
這是向你的用戶

966
00:34:06,856 --> 00:34:08,886
展示訂閱優惠的信號

967
00:34:13,056 --> 00:34:16,946
例如 在這裡你可以看到一個

968
00:34:17,335 --> 00:34:18,476
“再一次與我們同行”的標語

969
00:34:18,505 --> 00:34:19,896
展示給一個可能已經流失的用戶

970
00:34:19,896 --> 00:34:21,585
作為開發者的你現在

971
00:34:21,585 --> 00:34:22,686
正試圖重新贏得這個用戶

972
00:34:25,246 --> 00:34:27,005
我們還有一個

973
00:34:27,005 --> 00:34:28,616
來自《iTranslate》App 的開發者的示例

974
00:34:28,616 --> 00:34:30,016
他利用訂閱優惠為用戶提供了

975
00:34:30,016 --> 00:34:32,126
免費續訂一個月的優惠

976
00:34:33,326 --> 00:34:34,795
這些都是訂閱優惠

977
00:34:34,966 --> 00:34:35,956
這項全新特性的優秀應用實例

978
00:34:40,065 --> 00:34:41,025
現在讓我們討論一下保留用戶

979
00:34:41,626 --> 00:34:44,156
保留當前 仍在訂閱你的 App 的

980
00:34:44,156 --> 00:34:45,896
訂閱用戶的行為

981
00:34:47,016 --> 00:34:48,485
這裡我們看到一個用戶

982
00:34:48,545 --> 00:34:49,545
已經購買了他們的訂閱

983
00:34:50,806 --> 00:34:52,646
然而在訂閱期間

984
00:34:52,646 --> 00:34:54,626
他們選擇來到

985
00:34:54,706 --> 00:34:55,536
Apple 的“管理訂閱”界面

986
00:34:55,536 --> 00:34:58,666
並取消了訂閱

987
00:35:01,386 --> 00:35:02,836
我們更新了

988
00:35:02,836 --> 00:35:04,166
服務器到服務器的通知

989
00:35:04,556 --> 00:35:05,876
你可以通過

990
00:35:06,096 --> 00:35:07,546
與 Apple 重新驗證收據

991
00:35:07,546 --> 00:35:09,526
並確認“auto_renew_status”的值

992
00:35:09,526 --> 00:35:10,996
已從 1 更改為 0

993
00:35:10,996 --> 00:35:12,446
來找到此信息

994
00:35:13,126 --> 00:35:14,556
這是你的用戶

995
00:35:14,556 --> 00:35:16,326
將不會在訂閱到期後

996
00:35:16,326 --> 00:35:17,666
繼續訂閱的信號

997
00:35:18,206 --> 00:35:22,306
但如果你發佈了訂閱優惠

998
00:35:22,306 --> 00:35:23,616
我們將發送一個狀態

999
00:35:23,616 --> 00:35:25,016
或服務器到服務器的通知

1000
00:35:25,446 --> 00:35:26,776
讓你知道

1001
00:35:26,776 --> 00:35:28,406
該用戶將不再續訂

1002
00:35:29,136 --> 00:35:30,776
當用戶禁用續訂狀態

1003
00:35:30,776 --> 00:35:32,266
和啓用續訂狀態時

1004
00:35:32,266 --> 00:35:34,246
我們都會

1005
00:35:34,246 --> 00:35:35,556
發送此消息

1006
00:35:38,046 --> 00:35:39,276
這將告訴你

1007
00:35:39,276 --> 00:35:40,176
應該讓他們知道

1008
00:35:40,176 --> 00:35:43,016
他們還不應該離開

1009
00:35:43,016 --> 00:35:44,216
並期待接下來你的訂閱產品

1010
00:35:44,216 --> 00:35:45,326
會提供什麼新功能

1011
00:35:45,716 --> 00:35:48,566
如果我們回顧數據庫中的

1012
00:35:49,006 --> 00:35:50,056
用戶的例子

1013
00:35:50,056 --> 00:35:51,716
你可以看到

1014
00:35:52,166 --> 00:35:53,966
我們已經更新了

1015
00:35:53,966 --> 00:35:55,756
用於保留優惠的欄

1016
00:35:56,416 --> 00:35:57,466
當這個用戶

1017
00:35:57,466 --> 00:35:58,586
返回到 App

1018
00:35:58,586 --> 00:36:00,646
無論是被你的營銷激勵

1019
00:36:00,646 --> 00:36:03,956
還是僅僅出於使用的目的

1020
00:36:03,956 --> 00:36:04,856
都可以向他們展示訂閱優惠

1021
00:36:04,856 --> 00:36:06,846
並讓他們知道

1022
00:36:06,846 --> 00:36:08,086
現在是訂閱的好時候

1023
00:36:09,186 --> 00:36:10,396
“請再一次與我們同行

1024
00:36:10,826 --> 00:36:11,786
我們注意到你下個月

1025
00:36:11,786 --> 00:36:13,446
將會離開我們了”

1026
00:36:13,996 --> 00:36:15,636
這是一個很棒的標語

1027
00:36:15,936 --> 00:36:17,846
能夠贏回和保留用戶

1028
00:36:17,846 --> 00:36:19,206
繼續訂閱你的 App

1029
00:36:20,676 --> 00:36:22,206
我們還有一個

1030
00:36:22,206 --> 00:36:24,066
來自《Ultimate Guitar》的例子

1031
00:36:24,066 --> 00:36:25,896
提供一個月的免費訂閱和 50% 的折扣

1032
00:36:25,896 --> 00:36:27,796
讓用戶知道

1033
00:36:27,796 --> 00:36:28,726
這個優惠僅限今日

1034
00:36:32,286 --> 00:36:33,136
那麼這就是用戶保留

1035
00:36:34,626 --> 00:36:37,126
讓我們看一個升級示例

1036
00:36:37,956 --> 00:36:40,046
在這裡

1037
00:36:40,046 --> 00:36:41,826
我們看到一個訂閱用戶

1038
00:36:41,826 --> 00:36:43,316
選擇在 4 月 1 日降級他們的訂閱

1039
00:36:43,796 --> 00:36:46,286
你已經知道

1040
00:36:46,286 --> 00:36:48,216
我們將在收據中顯示即將更新的產品

1041
00:36:49,586 --> 00:36:50,986
你可以選擇從響應中

1042
00:36:50,986 --> 00:36:53,266
解析它並將其存儲在服務器中

1043
00:36:54,486 --> 00:36:56,036
我們還向你發送

1044
00:36:56,036 --> 00:36:57,406
服務器到服務器的通知

1045
00:36:57,806 --> 00:36:58,916
為了讓你知道

1046
00:36:58,916 --> 00:37:00,456
該用戶已選擇

1047
00:37:00,456 --> 00:37:01,176
降級他的訂閱

1048
00:37:05,046 --> 00:37:06,176
如果用戶

1049
00:37:06,176 --> 00:37:08,246
選擇了另一種產品

1050
00:37:08,246 --> 00:37:09,316
你知道他們一直在消費

1051
00:37:09,316 --> 00:37:10,396
更高級別的服務

1052
00:37:10,926 --> 00:37:11,876
無論是

1053
00:37:11,876 --> 00:37:13,056
享有更高折扣

1054
00:37:13,056 --> 00:37:14,836
和更長訂閱時間的

1055
00:37:14,836 --> 00:37:16,236
年度訂閱

1056
00:37:16,836 --> 00:37:18,766
還是高級訂閱服務

1057
00:37:18,816 --> 00:37:20,286
其能夠訪問

1058
00:37:20,286 --> 00:37:22,226
低級訂閱無權訪問的

1059
00:37:22,266 --> 00:37:24,676
這名用戶查看過的特定內容

1060
00:37:24,676 --> 00:37:28,596
在本例中

1061
00:37:28,786 --> 00:37:30,426
當你看到用戶降級訂閱時

1062
00:37:30,426 --> 00:37:31,836
你可以將他們標記為

1063
00:37:31,836 --> 00:37:32,576
有資格獲得升級優惠

1064
00:37:33,096 --> 00:37:36,926
當這名用戶

1065
00:37:36,926 --> 00:37:39,576
返回到你的 App 時

1066
00:37:39,786 --> 00:37:41,616
利用一個明確且簡潔的標語

1067
00:37:41,846 --> 00:37:43,396
展示一個訂閱優惠

1068
00:37:43,396 --> 00:37:46,006
說明優惠的內容

1069
00:37:46,236 --> 00:37:47,286
以及他們將

1070
00:37:47,286 --> 00:37:48,426
在這項優惠中獲得什麼

1071
00:37:49,216 --> 00:37:51,156
我們還有一個

1072
00:37:51,156 --> 00:37:53,466
很棒的《Dashlane》開發者的例子

1073
00:37:53,466 --> 00:37:54,416
他們試圖讓用戶

1074
00:37:54,416 --> 00:37:56,316
再次升級到

1075
00:37:56,316 --> 00:37:57,226
他們的高級服務

1076
00:38:00,116 --> 00:38:01,726
那麼這就是升級的例子

1077
00:38:02,266 --> 00:38:05,296
讓我們來討論一下用戶服務

1078
00:38:08,046 --> 00:38:09,186
我們都在盡我們最大的努力

1079
00:38:09,256 --> 00:38:10,956
製作完美的軟件

1080
00:38:10,956 --> 00:38:12,186
但是很明顯 有些時候用戶可能會

1081
00:38:12,186 --> 00:38:14,666
在你的訂閱產品中

1082
00:38:14,666 --> 00:38:16,156
遇到問題 故障

1083
00:38:16,156 --> 00:38:17,486
某種類型的錯誤或者停機

1084
00:38:18,756 --> 00:38:20,546
這個用戶可能決定

1085
00:38:20,546 --> 00:38:21,346
通過你的支持渠道

1086
00:38:21,346 --> 00:38:22,806
與你聯繫

1087
00:38:22,806 --> 00:38:24,816
並讓你知道他們的使用體驗並不理想

1088
00:38:25,316 --> 00:38:28,686
如果我們在你的服務器上

1089
00:38:28,686 --> 00:38:31,486
回顧用戶表

1090
00:38:31,486 --> 00:38:32,936
如果你的用戶服務代理

1091
00:38:32,936 --> 00:38:34,656
有能力查找那些特定的用戶

1092
00:38:34,706 --> 00:38:36,926
並將他們標識為

1093
00:38:36,926 --> 00:38:38,966
有資格享受優惠

1094
00:38:38,966 --> 00:38:40,796
你的代理就可以指示

1095
00:38:40,796 --> 00:38:42,626
那個用戶重新啓動 App

1096
00:38:42,626 --> 00:38:43,706
因為他們現在有資格享受優惠

1097
00:38:45,006 --> 00:38:47,646
你可能希望

1098
00:38:47,646 --> 00:38:48,946
在設置界面上

1099
00:38:48,946 --> 00:38:50,196
顯示訂閱優惠

1100
00:38:51,046 --> 00:38:53,486
在這裡 我們看到了一個

1101
00:38:53,486 --> 00:38:55,616
免費續訂一個月的優惠

1102
00:38:55,736 --> 00:38:57,076
並為用戶可能經歷的

1103
00:38:57,076 --> 00:38:58,856
任何服務中斷道歉

1104
00:39:00,196 --> 00:39:02,186
當用戶使用 App 時

1105
00:39:02,186 --> 00:39:04,566
他將看到一個訂閱優惠

1106
00:39:05,316 --> 00:39:07,126
和一個明確且簡潔的標語

1107
00:39:08,186 --> 00:39:09,316
這是讓你的用戶

1108
00:39:09,316 --> 00:39:11,766
滿意的好方法

1109
00:39:12,046 --> 00:39:13,186
並且可以安撫任何在你的 App 中

1110
00:39:13,186 --> 00:39:13,906
有過糟糕使用體驗的用戶

1111
00:39:18,046 --> 00:39:19,396
你還可以使用訂閱優惠

1112
00:39:19,396 --> 00:39:22,276
來獎勵你最忠實的訂閱用戶

1113
00:39:22,786 --> 00:39:26,436
在這裡

1114
00:39:26,436 --> 00:39:27,606
我們看到一個用戶

1115
00:39:27,606 --> 00:39:28,626
即將連續地第 11 次續訂

1116
00:39:29,416 --> 00:39:30,596
對於開發者來說

1117
00:39:30,596 --> 00:39:32,596
他顯然是一個很棒的的訂閱用戶

1118
00:39:33,236 --> 00:39:34,276
我們希望給予他們一些獎勵

1119
00:39:35,196 --> 00:39:37,716
如果我們查看

1120
00:39:37,716 --> 00:39:39,646
服務器上的用戶表

1121
00:39:39,646 --> 00:39:41,306
你將看到我們一直在捕捉續訂週期

1122
00:39:41,896 --> 00:39:43,616
這是通過存儲在

1123
00:39:43,616 --> 00:39:44,896
App 收據中的信息找到的

1124
00:39:47,196 --> 00:39:48,486
如果我們回顧

1125
00:39:48,486 --> 00:39:50,876
用戶的時間線

1126
00:39:51,096 --> 00:39:52,636
我們現在可以將該用戶

1127
00:39:52,636 --> 00:39:54,646
標記為有資格享受忠誠用戶優惠

1128
00:39:54,646 --> 00:39:56,096
因為他們已經越過了一個閾值

1129
00:39:56,126 --> 00:39:58,666
所以我們認為這些用戶值得獎勵

1130
00:39:59,716 --> 00:40:01,356
在下一次

1131
00:40:01,356 --> 00:40:03,046
使用 App 時

1132
00:40:03,046 --> 00:40:04,266
你可以通過

1133
00:40:04,266 --> 00:40:05,956
比如一個月的免費訂閱

1134
00:40:05,956 --> 00:40:06,976
來獎勵他們的服務和忠誠度

1135
00:40:11,106 --> 00:40:12,466
在這裡 我們看到一個

1136
00:40:12,466 --> 00:40:14,526
《Luminary》開發者的例子

1137
00:40:14,576 --> 00:40:16,166
他們獎勵早期的高級用戶

1138
00:40:16,786 --> 00:40:18,256
如果現在激活

1139
00:40:18,256 --> 00:40:20,656
用戶就能享受額外的兩個月的服務

1140
00:40:24,536 --> 00:40:27,446
最後讓我們談談輓留優惠

1141
00:40:28,846 --> 00:40:30,506
輓留優惠

1142
00:40:30,506 --> 00:40:32,466
和保留優惠十分相似

1143
00:40:33,846 --> 00:40:35,866
作為一名開發者

1144
00:40:35,866 --> 00:40:37,506
你可能掌握一些信息

1145
00:40:37,506 --> 00:40:39,926
使你相信這個用戶可能會流失

1146
00:40:40,606 --> 00:40:41,966
這指的是

1147
00:40:41,966 --> 00:40:43,996
在用戶可能採取行動

1148
00:40:43,996 --> 00:40:45,506
進入“管理訂閱”界面

1149
00:40:45,506 --> 00:40:46,506
並取消訂閱之前

1150
00:40:48,076 --> 00:40:49,926
如果你發現

1151
00:40:50,116 --> 00:40:51,756
其中一個有流失傾向的用戶

1152
00:40:51,756 --> 00:40:53,956
進入到

1153
00:40:54,006 --> 00:40:55,306
你在 App 內部的設置界面中

1154
00:40:55,306 --> 00:40:56,576
安置的的一個深鏈接

1155
00:40:56,576 --> 00:40:58,836
使得他跳轉到

1156
00:40:59,026 --> 00:41:00,476
Apple 的“管理訂閱”界面

1157
00:41:00,476 --> 00:41:02,576
你可以在這名用戶

1158
00:41:02,576 --> 00:41:05,776
跳轉到 Apple 的

1159
00:41:05,776 --> 00:41:07,436
“管理訂閱”界面之前

1160
00:41:07,436 --> 00:41:08,946
向他展示一個訂閱優惠

1161
00:41:13,046 --> 00:41:14,276
以上是六個不同的例子

1162
00:41:14,276 --> 00:41:16,126
向你展示了

1163
00:41:16,126 --> 00:41:18,366
如何使用訂閱優惠

1164
00:41:18,366 --> 00:41:20,806
來最小化 App 的用戶自主流失

1165
00:41:21,506 --> 00:41:23,596
但這僅僅是一個開始

1166
00:41:23,596 --> 00:41:24,956
我非常興奮地看到

1167
00:41:24,956 --> 00:41:27,006
作為開發者

1168
00:41:27,006 --> 00:41:28,566
你能夠提出一些

1169
00:41:28,566 --> 00:41:29,756
非常棒的想法

1170
00:41:29,756 --> 00:41:31,636
為你的 App 中的訂閱用戶

1171
00:41:31,636 --> 00:41:32,626
提供良好的用戶體驗

1172
00:41:37,046 --> 00:41:38,546
在訂閱優惠

1173
00:41:38,546 --> 00:41:39,766
被分配給用戶之後

1174
00:41:40,346 --> 00:41:42,086
下一步是

1175
00:41:42,216 --> 00:41:45,356
分析訂閱優惠的性能

1176
00:41:45,926 --> 00:41:49,766
今天 我很高興地宣佈

1177
00:41:49,846 --> 00:41:52,416
我們推出了兩個全新的報告儀錶盤

1178
00:41:52,416 --> 00:41:53,746
能夠幫助你

1179
00:41:53,746 --> 00:41:55,476
分析訂閱活動

1180
00:41:55,476 --> 00:41:57,326
訂閱狀態儀錶盤

1181
00:41:57,326 --> 00:41:58,796
和訂閱事件儀錶盤

1182
00:41:59,306 --> 00:42:02,656
讓我們看一看 App Store Connect

1183
00:42:03,706 --> 00:42:05,036
如果你導航到

1184
00:42:05,036 --> 00:42:07,236
銷售和趨勢模塊

1185
00:42:07,236 --> 00:42:08,506
你將看到

1186
00:42:08,506 --> 00:42:09,486
我們推出的訂閱狀態指示板

1187
00:42:10,276 --> 00:42:11,926
這個儀錶盤允許你

1188
00:42:11,926 --> 00:42:13,816
隨著時間的推移

1189
00:42:14,186 --> 00:42:15,376
瞭解你的訂閱用戶基礎

1190
00:42:16,176 --> 00:42:20,056
例如 你將能夠在標準價格

1191
00:42:20,056 --> 00:42:22,076
與試用優惠

1192
00:42:22,506 --> 00:42:24,506
或訂閱優惠之間比較

1193
00:42:24,506 --> 00:42:25,436
精確地查看有多少訂閱用戶

1194
00:42:26,956 --> 00:42:28,916
這是一個很好的工具

1195
00:42:28,916 --> 00:42:30,356
幫助你查看和分析

1196
00:42:30,356 --> 00:42:31,466
你的訂閱用戶在不同時間

1197
00:42:31,466 --> 00:42:31,956
和地區的增長情況

1198
00:42:35,066 --> 00:42:39,836
此外 你還可以使用此儀錶盤

1199
00:42:40,146 --> 00:42:41,996
查看 App 中的用戶

1200
00:42:41,996 --> 00:42:43,976
正在選擇哪些優惠

1201
00:42:48,166 --> 00:42:49,516
我們還啓用了

1202
00:42:49,516 --> 00:42:51,226
全新的訂閱事件儀錶盤

1203
00:42:51,976 --> 00:42:54,316
它允許你

1204
00:42:54,316 --> 00:42:55,416
隨時查看

1205
00:42:55,416 --> 00:42:57,006
用戶訂閱活動

1206
00:42:58,266 --> 00:42:59,596
你可以使用它

1207
00:42:59,596 --> 00:43:00,826
來查看用戶如何轉換到

1208
00:43:00,826 --> 00:43:01,846
訂閱的標準價格

1209
00:43:01,846 --> 00:43:04,156
或者你甚至可以

1210
00:43:04,156 --> 00:43:05,666
使用它來瞭解

1211
00:43:05,906 --> 00:43:08,176
新訂閱用戶

1212
00:43:08,176 --> 00:43:09,166
與回歸的訂閱用戶的比率

1213
00:43:13,046 --> 00:43:14,326
通過應用正確的過濾器

1214
00:43:14,736 --> 00:43:15,776
你還可以使用它

1215
00:43:15,776 --> 00:43:17,556
來具體查看

1216
00:43:17,556 --> 00:43:19,036
特定的訂閱優惠

1217
00:43:19,626 --> 00:43:21,456
如何贏回以前未訂閱的用戶

1218
00:43:21,496 --> 00:43:23,776
然後你可以

1219
00:43:23,776 --> 00:43:25,826
使用這些信息

1220
00:43:25,826 --> 00:43:27,656
通知和優化你的訂閱優惠

1221
00:43:27,656 --> 00:43:29,916
並決定在何時分配優惠

1222
00:43:33,046 --> 00:43:35,156
總而言之

1223
00:43:35,156 --> 00:43:37,226
如果你從今天的會議中

1224
00:43:37,226 --> 00:43:38,986
學習到了什麼

1225
00:43:38,986 --> 00:43:39,806
我們希望是實現訂閱優惠

1226
00:43:40,446 --> 00:43:43,996
但是你必須在 App 內

1227
00:43:43,996 --> 00:43:46,056
和服務器上實現它們

1228
00:43:46,616 --> 00:43:49,426
我們強烈建議你

1229
00:43:49,426 --> 00:43:51,046
執行詳細的

1230
00:43:51,046 --> 00:43:51,996
用戶資格規則

1231
00:43:52,676 --> 00:43:53,906
通過使用

1232
00:43:53,906 --> 00:43:56,926
來自收據的信息

1233
00:43:56,986 --> 00:43:58,336
我們更新了服務器到服務器的通知

1234
00:43:58,336 --> 00:43:59,776
以便你能夠實時瞭解

1235
00:43:59,776 --> 00:44:01,606
用戶活動

1236
00:44:02,146 --> 00:44:05,216
並獲得只有開發者能夠擁有

1237
00:44:05,216 --> 00:44:07,626
且 Apple 不會擁有的數據

1238
00:44:10,046 --> 00:44:11,356
我們鼓勵你向用戶提供

1239
00:44:11,446 --> 00:44:13,856
內容定向的訂閱優惠

1240
00:44:13,956 --> 00:44:16,636
我們希望你這樣做

1241
00:44:16,636 --> 00:44:18,046
以便在 App 中

1242
00:44:18,046 --> 00:44:20,436
提供最佳的用戶體驗

1243
00:44:20,836 --> 00:44:25,556
最後 在訂閱優惠被分發到用戶之後

1244
00:44:25,596 --> 00:44:27,216
建議你使用我們的兩個

1245
00:44:27,216 --> 00:44:29,106
全新的報告儀錶盤

1246
00:44:29,106 --> 00:44:30,896
來監視這些

1247
00:44:30,896 --> 00:44:37,986
訂閱優惠的性能 獲取更多信息

1248
00:44:37,986 --> 00:44:39,336
歡迎大家

1249
00:44:39,336 --> 00:44:40,496
在演講之後的下午 3 點

1250
00:44:40,496 --> 00:44:43,146
來到我們的實驗室

1251
00:44:43,916 --> 00:44:46,106
感謝今天所有參加

1252
00:44:46,106 --> 00:44:47,336
“訂閱優惠”會議的各位

1253
00:44:47,336 --> 00:44:48,766
我真的很期待

1254
00:44:48,766 --> 00:44:50,006
能夠看到你們在你們的 App 中

1255
00:44:50,006 --> 00:44:51,256
做出怎樣的創新

1256
00:44:51,256 --> 00:44:52,496
為我們共同的用戶

1257
00:44:52,496 --> 00:44:53,296
提供優異的使用體驗

1258
00:44:53,706 --> 00:44:53,976
謝謝大家

1259
00:44:54,516 --> 00:44:57,500
[掌聲]

